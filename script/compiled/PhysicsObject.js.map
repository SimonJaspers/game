{"version":3,"sources":["script/PhysicsObject.js"],"names":[],"mappings":"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","file":"script/PhysicsObject.js","sourcesContent":["class PhysicsObject {\n\tconstructor(width, height, mass, x, y) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.mass = mass;\n\t\t\n\t\tthis.forces = [\n\t\t\tfunction(vector) {\n\t\t\t\tvar DRAG = 0.01;\n\t\t\t\tvar dirX = vector.speed.x > 0 ? -1 : 1;\n\t\t\t\tvar dirY = vector.speed.y > 0 ? -1 : 1;\n\t\t\t\t\n\t\t\t\treturn new Vector(\n\t\t\t\t\tdirX * DRAG * Math.pow(vector.speed.x, 2),\n\t\t\t\t\tdirY * DRAG * Math.pow(vector.speed.y, 2)\n\t\t\t\t);\n\t\t\t}\n\t\t];\n\t\t\n\t\tthis._collisionObjects = [];\n\t\t\n\t\tthis.position = new Vector(x, y);\n\t\tthis.speed = new Vector(0, 0);\n\t\tthis.acceleration = new Vector(0, 0);\n\t}\n\t\n\tnext() {\n\t\tvar totalForce = this.forces\n\t\t\t.map(forceMethod => forceMethod(this))\n\t\t\t.reduce((force, sum) => sum.add(force), new Vector(0, 0));\n\t\t\n\t\tthis._collisionObjects.forEach(object => {\n\t\t\tlet limit = (this.width + object.width) / 2;\n\t\t\tlet distance = this.position.distanceTo(object.position) || 0.01;\n\t\t\tif (distance < limit) {\n\t\t\t\tlet SPRING_CONSTANT = 300;\n\t\t\t\tlet springForce = (limit - distance) * SPRING_CONSTANT;\n\t\t\t\tlet fx = ((this.position.x - object.position.x) / distance) * springForce;\n\t\t\t\tlet fy = ((this.position.y - object.position.y) / distance) * springForce;\n\t\t\t\ttotalForce.add(new Vector(fx, fy));\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.acceleration.x = totalForce.x / this.mass;\n\t\tthis.acceleration.y = totalForce.y / this.mass;\n\t\t\t\t\n\t\tthis.speed.add(this.acceleration);\n\t\t\n\t\tthis.position.x += this.speed.x / 60;\n\t\tthis.position.y += this.speed.y / 60;\n\t}\n\t\n\taddCollisionObject(object) {\n\t\tthis._collisionObjects.push(object);\n\t}\n\t\n\tremoveCollisionObject(object) {\n\t\tvar index = this._collisionObjects.indexOf(object);\n\t\t\n\t\tif (index !== -1) {\n\t\t\tthis._collisionObjects.splice(index, 1);\t\t\t\n\t\t}\n\t}\n\t\n}"]}